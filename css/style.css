/*
 * Global vars
 */

:root {
  --inicio-size: 1; /* Fraction of vh*/
  --section-size: 1.2; /* Fraction of vh */
  --min-section-size: 960; /* px */
  --color-lightblue: #00dbfc;
  --color-grey: #3b4749;
  --color-orange: #ff7a00;
  --color-lightgrey: #f7f6f3; /* #f9fafa;*/
  --color-background: #f7f6f3;
  --color-strong: #eb1000;
}

/*
 * General setup
 */

* {
  padding: 0;
  margin: 0;
}

body {
  background-color: var(--color-background);
  font-family: "Nunito Sans", "Times New Roman";
  color: var(--color-grey);
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: "Zilla Slab Highlight", "Trebuchet MS";
}

p {
  margin: 1em 0.5em;
}

strong {
  color: var(--color-strong);
}

/*
 * General classes
 */

.center {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.row {
  flex-direction: row;
}

.italic {
  font-style: italic;
}

/*
 * Inicio (document beginning)
 */

#inicio {
  position: relative;
  height: calc(var(--inicio-size) * 100vh);
  z-index: 1;
  background-image: url("../img/cocha-lagunas-front-min.jpg");
  mask-image: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 1) 70%,
    rgba(0, 0, 0, 0) 100%
  );
  background-position: center;
  background-size: cover;
}

#logo {
  position: absolute;
  top: 60px;
  left: 60px;
  width: 90px;
  height: 75px;
  border-radius: 2px;
  transform: translate(-50%, -50%);
  background-image: url("../img/labtecno-logo.svg");
  background-size: 90px 75px;
  background-color: white;
}

@media (max-width: 500px) {
  #logo {
    width: 60px;
    height: 50px;
    background-size: 60px 50px;
  }
}

#titulo {
  font-size: 1.5em;
  font-weight: bold;
  margin: 2em;
  text-align: center;
  color: white;
}

#titulo h1 {
  font-family: serif;
  text-shadow: 1px 1px 1px #000;
}

#titulo h1 strong {
  display: block;
  color: white;
}

#titulo h1 span {
  display: block;
  font-size: 70%;
}

@media (max-width: 768px) {
  #titulo {
    font-size: 1.2em;
  }
}

/*
 * Sections style
 */

section {
  display: grid;
  box-sizing: border-box;
  /*border-top: solid 3px black;
  border-bottom: solid 3px black;
  background: lightyellow; */
  height: max(
    calc(var(--section-size) * 100vh),
    calc(var(--min-section-size) * 1px)
  );
  grid-template-columns: 60% 25% 15%;
  grid-template-rows: auto 25vh auto 25vh auto;
  grid-template-areas:
    ". . ."
    ". . ."
    ". p ."
    "q . ."
    ". . .";
}

@media (max-width: 768px) {
  section {
    grid-template-columns: 20% 60% 20%;
    grid-template-rows: auto 40vh auto 10vh auto;
    grid-template-areas:
      ". . ."
      ". . ."
      ". p ."
      ". q ."
      ". . .";
  }
}

@media (max-width: 400px) {
  section {
    grid-template-columns: 12% 76% 12%;
    grid-template-rows: auto 40vh auto 10vh auto;
    grid-template-areas:
      ". . ."
      ". . ."
      ". p ."
      ". q ."
      ". . .";
  }
}

section > div {
  position: relative;
  grid-area: p;
  z-index: 1;
  /* To be able to click map below it */
  pointer-events: none;
}

section > div p {
  padding: 1em 0.8em;
  /*  border: solid 2px var(--color-grey); */
  background: rgba(255, 255, 255, 0.9);
  border-radius: 5px;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  font-size: 1.25em;
  pointer-events: auto;
}

section span {
  color: var(--color-strong);
}

section span:hover {
  cursor: pointer;
}

section blockquote {
  position: relative;
  grid-area: q;
  z-index: 1;
  margin-left: 20%;
  font-size: 1.5rem;
  line-height: 1.5;
  font-weight: 700;
  font-family: serif;
  font-style: italic;
}

section blockquote div {
  background: rgba(255, 255, 255, 0.8);
}

@media (max-width: 768px) {
  section blockquote {
    margin-left: 0;
    line-height: 1.4;
    font-size: 1.1rem;
  }
}

section blockquote p:before {
  content: "“";
}

section blockquote p:after {
  content: "”";
}

section blockquote figcaption:before {
  content: "—";
}

section blockquote figcaption {
  font-style: normal;
}

section img {
  max-width: 450px;
  max-height: 300px;
  background-color: white;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  filter: grayscale(1);
}

#end-div {
  position: relative;
  width: 100%;
  height: 100vh;
  bottom: 0;
  right: 0;
  z-index: 1;
}

#end-div h2 {
  text-align: center;
  width: auto;
  background-color: white;
}

@media (max-width: 400px) {
  #end-div h2 {
    background-color: initial;
  }
}

#final-message {
  position: absolute;
  bottom: 0;
  padding: 0.2em 0.8em;
  font-size: 1.25em;
  appearance: button;
  transform: translateY(-100%);
  text-decoration: none;
  opacity: 0;
  background: var(--color-grey);
  color: white;
  border-radius: 5px;
  transition: 0.2s;
}

#final-message strong {
  font-weight: bold;
  color: white;
}

#final-message:hover {
  transform: translateY(-100%) scale(1.1);
}

/*
 * Footer
 */

footer {
  position: relative;
  font-weight: bold;
  z-index: 1;
  background-color: white;
  font-size: 1.1em;
  border-top: 2px solid var(--color-grey);
}

.social-media {
  position: absolute;
  left: 0;
}

.buttons a {
  width: 40px;
  height: 40px;
  margin: 1em 0.5em;
  border-radius: 20px;
}
.meta {
  width: 100%;
}

.meta a {
  margin: 0.5em;
  text-decoration: none;
  color: var(--color-grey);
  text-align: center;
  max-width: 40%;
}

.code-div {
  position: absolute;
  right: 0;
}

#share-facebook {
  background: url(../img/facebook-logo.svg);
}

#share-twitter {
  background: url(../img/twitter-logo.svg);
}

#share-whatsapp {
  background: url(../img/whatsapp-logo.svg);
}

#github-code {
  background: url(../img/github-logo.svg);
  background-size: 40px 40px;
}

@media (max-width: 500px) {
  .hide-small {
    display: none;
  }

  .buttons a {
    width: 30px;
    height: 30px;
    margin: 1em 0.2em;
    border-radius: 15px;
  }

  .meta {
    font-size: 75%;
  }

  #github-code {
    margin-right: 0.5em;
    background-size: 30px 30px;
  }
}

/*
 * Captions
 */

.caption {
  position: fixed;
  font-family: "Zilla Slab Highlight", "Trebuchet MS";
  transform: translate(-50%, -50%);
  font-size: 1.2em;
  z-index: 0;
  background-color: rgba(255, 255, 255, 0.4);
}

.avenida,
.edificio {
  font-family: "Nunito Sans", serif;
  font-size: 1.1em;
  font-weight: bold;
  color: var(--color-strong);
  text-align: center;
  vertical-align: middle;
}

.edificio {
  background-color: rgba(255, 255, 255, 0);
  color: white;
}

@media (max-width: 768px) {
  .caption {
    font-size: 1em;
  }
  .avenida,
  .edificio {
    font-size: 0.8em;
  }
}

/*
 *  Slideshow (https://sabe.io/tutorials/how-to-create-modal-popup-box)
 */

.modal {
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.9);
  visibility: hidden;
  transform: scale(1.1);
  transition: visibility 0s linear 0.25s, opacity 0.25s 0s, transform 0.25s;
  z-index: 2;
}

#slideshow {
  height: 100%;
}

#slideshow h2,
#slideshow cite,
#slideshow img,
#slideshow figcaption {
  box-sizing: border-box;
  font-family: serif;
  color: white;
  text-align: center;
  padding: 0.5em;
  font-size: 1em;
}

#slideshow h2 {
  height: auto;
  min-height: 10%;
}

#slideshow cite {
  font-size: 0.9em;
  padding: 0;
}

#slideshow img {
  max-height: 70%;
  max-width: 80%;
}

.prev {
  position: absolute;
  top: 50%;
  left: 10%;
  transform: translate(-50%, -50%);
}
.next {
  position: absolute;
  top: 50%;
  left: 90%;
  transform: translate(-50%, -50%);
}

.close-modal-button {
  position: fixed;
  top: 3%;
  left: 98%;
  transform: translateX(-100%);
  height: 2rem;
  width: 2rem;
  font-size: 1.5rem;
  line-height: 2rem;
  text-align: center;
  cursor: pointer;
  border-radius: 1rem;
  background-color: white;
  color: black;
}
.close-modal-button:hover {
  background-color: black;
  color: white;
}

/* https://codepen.io/reacraf/pen/ZPqRKV */
.side-arrow::before {
  content: " ";
  width: 20px;
  height: 20px;
  transform: rotate(45deg);
  cursor: pointer;
  display: block;
}

.prev::before {
  border-left: 4px solid white;
  border-bottom: 4px solid white;
}

.next::before {
  border-right: 4px solid white;
  border-top: 4px solid white;
}

.show-modal {
  display: initial;
  visibility: visible;
  transform: scale(1);
  transition: visibility 0s linear 0s, transform 0.25s;
}

/*
 * svg
 */

.map-container {
  position: fixed;
  overflow: hidden;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  z-index: 0;
}

.map-container img {
  position: absolute;
  object-fit: cover;
  width: 100%;
  height: 100%;
  z-index: -1;
}

/* Fix to show top part of figure. Still buggy.
 * 
 */
/*
@media (min-width: 768px) {
  .map-container {
    overflow: visible;
  }
  .map-container img {
    bottom: 0;
    height: auto;
    min-height: 100%;
    width: auto;
    min-width: 100%;
    transform: translateY(37.5vw) translateY(-50vh);
    clip: rect(0, 2000px, calc(37.5vw + 50vh), 0);
  }
}*/

.top {
  position: absolute;
  top: calc(100vh * var(--inicio-size));
}

/* To stop at footer */
.bottom {
  position: absolute;
  top: calc(
    100vh * var(--inicio-size) + 12 *
      max(
        calc(var(--section-size) * 100vh),
        calc(var(--min-section-size) * 1px)
      )
  );
}

.map-container svg {
  height: 100vh;
  width: 100%;
}

#cercado-svg-lagunas circle {
  transform-box: fill-box;
  transform-origin: center;
  cursor: pointer;
  transition: 0.3s;
}

#cercado-svg-lagunas circle:hover {
  transform: scale(1.4);
}

.estadio-cover {
  fill: url(#estadio-cover);
}

.complejo-sarco-cover {
  fill: url(#complejo-sarco-cover);
}

/* For lake cuadras that has no background img */
.dash-border {
  stroke: var(--color-strong);
  stroke-dasharray: 2, 3;
  stroke-width: 0.75;
  animation: rotation 10s linear normal infinite;
}

@keyframes rotation {
  100% {
    transform: rotate(360deg);
  }
}
.estacion-teleferico-cover {
  stroke: none;
  animation: none;
  fill: url(#estacion-teleferico-cover);
}

/* Fix to hover on "laguna cuadras" */
#rio-rocha {
  pointer-events: none;
}

#cercado-svg-lagunas path {
  fill: var(--color-lightblue);
  animation: grow 2s linear alternate infinite;
  transform-box: fill-box;
  transform-origin: center;
}

@keyframes grow {
  100% {
    transform: scale(1.1);
  }
}

#cercado-svg-lagunas .shrink /* This lake isn't growing */ {
  animation: shrink 3s 1s ease-in forwards;
}

@keyframes shrink {
  100% {
    transform: scale(0.4);
  }
}

.draw-rocha {
  stroke-dasharray: 310;
  stroke-dashoffset: 310;
  animation: paint-rocha 4.2s linear forwards;
}

@keyframes paint-rocha {
  0% {
    stroke-dashoffset: 310;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

.draw-tamborada {
  stroke-dasharray: 260;
  stroke-dashoffset: 260;
  animation: paint-tamborada 4.2s 3s linear forwards;
}

@keyframes paint-tamborada {
  0% {
    stroke-dashoffset: 260;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

/* special class, apply last */
.hidden {
  display: none;
}
